import jwt from 'jsonwebtoken';

const token = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdXRoQ2xhc3MiOiJMb2NhdGlvbiIsImF1dGhDbGFzc0lkIjoiVHR5OHRtZnNJQk40RGRPVnpnVmEiLCJzb3VyY2UiOiJJTlRFR1JBVElPTiIsInNvdXJjZUlkIjoiNjhiZjJhNGM4MjZlZmM1M2JlYjhiOTJjLW1mYmljZW9lIiwiY2hhbm5lbCI6Ik9BVVRIIiwicHJpbWFyeUF1dGhDbGFzc0lkIjoiVHR5OHRtZnNJQk40RGRPVnpnVmEiLCJvYXV0aE1ldGEiOnsic2NvcGVzIjpbImNhbGVuZGFycy53cml0ZSIsImNhbGVuZGFycy5yZWFkb25seSIsImNhbGVuZGFycy9ldmVudHMucmVhZG9ubHkiLCJjYWxlbmRhcnMvZXZlbnRzLndyaXRlIiwiY2FtcGFpZ25zLnJlYWRvbmx5IiwiY29udmVyc2F0aW9ucy5yZWFkb25seSIsImNvbnZlcnNhdGlvbnMud3JpdGUiLCJjb252ZXJzYXRpb25zL21lc3NhZ2UucmVhZG9ubHkiLCJjb252ZXJzYXRpb25zL21lc3NhZ2Uud3JpdGUiLCJjb250YWN0cy5yZWFkb25seSIsImNvbnRhY3RzLndyaXRlIiwiZm9ybXMucmVhZG9ubHkiLCJmb3Jtcy53cml0ZSIsImxvY2F0aW9ucy5yZWFkb25seSIsImxvY2F0aW9ucy9jdXN0b21GaWVsZHMucmVhZG9ubHkiLCJsb2NhdGlvbnMvY3VzdG9tRmllbGRzLndyaXRlIiwibG9jYXRpb25zL3Rhc2tzLnJlYWRvbmx5IiwibG9jYXRpb25zL3Rhc2tzLndyaXRlIiwibG9jYXRpb25zL3RhZ3MucmVhZG9ubHkiLCJsb2NhdGlvbnMvdGFncy53cml0ZSIsIm9hdXRoLndyaXRlIiwib2F1dGgucmVhZG9ubHkiLCJvcHBvcnR1bml0aWVzLnJlYWRvbmx5Iiwib3Bwb3J0dW5pdGllcy53cml0ZSIsInVzZXJzLnJlYWRvbmx5Il0sImNsaWVudCI6IjY4YmYyYTRjODI2ZWZjNTNiZWI4YjkyYyIsInZlcnNpb25JZCI6IjY4YmYyYTRjODI2ZWZjNTNiZWI4YjkyYyIsImNsaWVudEtleSI6IjY4YmYyYTRjODI2ZWZjNTNiZWI4YjkyYy1tZmJpY2VvZSJ9LCJpYXQiOjE3NTc1MTg1OTkuMzcyLCJleHAiOjE3NTc2MDQ5OTkuMzcyfQ.FHt-kzgAb_4_03FCC7HTGA_5qXD3kjiRKl3gFeg4BP4P-0VimaGV-1fhEiXRaeY6ODGci4EDugfJWrT6pP6ftqP8e2XMdgxfvMcVZ6R_7_nIPuG8vaRePNUFegHG02azMxEK1W7sGlzKiSnBEV8ZceTc5TM_85XdruHe56EOegtd-H7bkIm9SX6pCs-MoTGUTc4kWoiaG5YO67HDGzOxEXfwCCMq6FNKTS-Qtld3V6EWN_uYs2u9geFATBRY2MRejSxzOV78xMU4Pk9Trjg9Z9YSVXB1vPa1vfcPBq6EBakRWfLkZhVletyOdrKB3NKbnpH2Em2qut1jPfpQh7C4nyjL00oaOneinpTYk-uJcxGmvzq3FR-hI-RiBCKN3mTLIjglg9n7yZ4LOp4Z4nVzn_qoWEGTiOuN-0jHwnpBI8tZ-m5gSHl1-75Y6UcE15FReAq2CsjilUN4WEDOBpT1wjgzcmIdoVtvFv6WAJuIYDK_Yyhvt_N4NL8tggvgD9Ql-1bFB0wX5E6jZ1MTiBuAYwHKPmQe6065Dn-F6hgGh-Et0N7DXE2xZ9i8wvLirZAbhQLHAyg5DJz7huHqXvIs6OBqBInIYXhov9l9jQAZrmGzT2B0sqNAIeEPivx73EkxNJX7yeZD7yyC7IHxSTSDASiwphd825B6bsbE6ttI7Wg";

const decoded = jwt.decode(token);
console.log("Token client info:");
console.log("Client ID from token:", decoded.oauthMeta?.client);
console.log("Client Key from token:", decoded.oauthMeta?.clientKey);
console.log("Issued at:", new Date(decoded.iat * 1000));
console.log("Expires at:", new Date(decoded.exp * 1000));
console.log("Current time:", new Date());

const currentClientId = "68bf2a4c826efc53beb8b92c-mfbiceoe";
console.log("\nCurrent Lambda client ID:", currentClientId);
console.log("Token-Client match:", decoded.oauthMeta?.client === currentClientId);